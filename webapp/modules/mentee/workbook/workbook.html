<!-- MultiStep Form -->
<div class="workbook">

    <div id="form_wrapper">
        <!-- progressbar -->

        <ul id="progressbar" class="row py-4 px-0">
            <li class="col" ng-class="{'active':item.active}" ng-repeat="item in vm.stageList" ng-click="vm.navigateToStage(item, ($index+1))">
                {{item.title}}
            </li>
        </ul>

        <div class="text-center mb-4">
            {{vm.stageName[vm.gst]}}
        </div>

        <form>
            <div class="stage-holder" ng-show="vm.stageVisibility.stage1">
                <div class="row" ng-if="vm.stagesList.stage1.mentorFeedback">
                    <div class="col">
                        <div class="form-group">
                            <label class="text-danger" for="vm.stagesList.stage1.mentorFeedback">Mentor Feedback
                        </label>
                            <textarea type="text" class="form-control" ng-model="vm.stagesList.stage1.mentorFeedback" readonly> </textarea>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.agreement.menteeName">Mentee Name 
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.agreement.menteeName" placeholder="Enter mentee name">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.agreement.menteeRole">Mentee Role
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.agreement.menteeRole" placeholder="Enter mentee role">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.agreement.menteeGoal">Mentee Workplace
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.agreement.menteeWorkPlace" placeholder="Enter mentee workplace">
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.agreement.menteeGoal">Mentee Goal
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.agreement.menteeGoal" placeholder="Enter mentee agreement">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.agreement.mentorName">Mentor Name
                        </label>
                            <input type="text" class="form-control" ng-model="vm.stagesList.stage1.agreement.mentorName" readonly placeholder="Enter mentee name">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.agreement.mentorRole">Mentor Role
                        </label>
                            <input type="text" class="form-control" ng-model="vm.stagesList.stage1.agreement.mentorRole" readonly placeholder="Enter mentee role">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.agreement.mentorWorkPlace">Mentor Workplace
                        </label>
                            <input type="text" class="form-control" readonly ng-model="vm.stagesList.stage1.agreement.mentorWorkPlace" placeholder="Enter mentee workplace">
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.agreement.mentorGoal">Mentor Goal
                        </label>
                            <input type="text" class="form-control" readonly ng-model="vm.stagesList.stage1.agreement.mentorGoal" placeholder="Enter mentee workplace">
                        </div>
                    </div>
                </div>

                <b>Assessment activity </b>
                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.assesment.menteeNote">Mentee
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.assesment.menteeNote" placeholder="Enter mentee name">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.assesment.mentorNote">Mentor
                        </label>
                            <input type="text" class="form-control" readonly ng-model="vm.stagesList.stage1.assesment.mentorNote" placeholder="Enter mentee role">
                        </div>
                    </div>
                </div>

                <b>Mapping evidence activity </b>
                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.mappingEvidence.menteeNote">Mentee
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.mappingEvidence.menteeNote" placeholder="Enter mentee name">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.mappingEvidence.mentorNote">Mentor
                        </label>
                            <input type="text" class="form-control" readonly ng-model="vm.stagesList.stage1.mappingEvidence.mentorNote" placeholder="Enter mentee role">
                        </div>
                    </div>
                </div>

                <b>Action planning activity </b>
                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.actionPlan.menteeNote">Mentee
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.actionPlan.menteeNote" placeholder="Enter mentee name">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.actionPlan.mentorNote">Mentor
                        </label>
                            <input type="text" class="form-control" readonly ng-model="vm.stagesList.stage1.actionPlan.mentorNote" placeholder="Enter mentee role">
                        </div>
                    </div>
                </div>

                <b>Verification activity </b>
                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.verificationPlan.menteeNote">Mentee
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.verificationPlan.menteeNote" placeholder="Enter mentee name">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.verificationPlan.mentorNote">Mentor
                        </label>
                            <input type="text" class="form-control" readonly ng-model="vm.stagesList.stage1.verificationPlan.mentorNote" placeholder="Enter mentee role">
                        </div>
                    </div>
                </div>

                <b>Meeting Schedules </b>
                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.meetings.timeData">Meeting Time
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.meetings.timeData" placeholder="Enter mentee name">
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.meetings.methodToRecord">Method for recording and monitoring of meetings: (who will take minutes, etc)
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.meetings.methodToRecord" placeholder="Enter mentee role">
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group">
                            <label for="vm.stagesList.stage1.meetings.problemSolving">Strategies for addressing difficulties along the way
                        </label>
                            <input type="text" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.meetings.problemSolving" placeholder="Enter mentee role">
                        </div>
                    </div>
                    <br>
                    <div class="col-12" ng-repeat="item in vm.stagesList.stage1.meetings.timing">
                        <b>Dates and format of meeting</b>
                        <input ng-model="item.date" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" placeholder="date" />
                        <input ng-model="item.format" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" placeholder="format" />
                    </div>
                    <br>
                    <div class="col-12" ng-repeat="item in vm.stagesList.stage1.meetings.reviewDate">
                        <b>Review dates</b>
                        <input ng-model="item.date" class="form-control" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" placeholder="date" />
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        Agree - <input type="checkbox" ng-readonly="vm.stagesList.stage1.rights.mentee.readOnly" ng-disabled="vm.stagesList.stage1.rights.mentee.readOnly" ng-model="vm.stagesList.stage1.confidentiality.menteeAgree" />
                    </div>
                </div>
                <div class="text-right">
                    <button ng-show="!vm.stagesList.stage1.rights.mentee.readOnly" type="submit" class="btn btn-primary" ng-click="vm.saveStage(1);">Submit</button>
                    <button ng-show="vm.stagesList.stage1.rights.mentee.readOnly == 1 && vm.stagesList.stage1.rights.mentor.readOnly == 1" type="submit" class="btn btn-primary" ng-click="vm.nextStage()">Next</button>
                    <div ng-show="vm.stagesList.stage1.rights.mentee.readOnly == 1 && vm.stagesList.stage1.rights.mentor.readOnly == 0" class="text-right text-danger"><b>Under Review.</b></div>
                </div>
            </div>

            <div class="stage-holder" ng-show="vm.stageVisibility.stage2">
                <div class="controls">
                    <button class="btn btn-sm mr-1" ng-click="vm.openAllAccordion('sa',true)">Open All</button>
                    <button class="btn btn-sm" ng-click="vm.openAllAccordion('sa',false)">Close All</button>
                </div>
                <div class="row" ng-if="vm.stagesList.stage2.mentorFeedback">
                    <div class="col">
                        <div class="form-group">
                            <label class="text-danger" for="vm.stagesList.stage2.mentorFeedback">Mentor Feedback
                        </label>
                            <textarea type="text" class="form-control" ng-model="vm.stagesList.stage2.mentorFeedback" readonly> </textarea>
                        </div>
                    </div>
                </div>
                <div class="com-list" ng-repeat="item in vm.stagesList.stage2.items">
                    <div class="com-header clearfix" ng-click="item.show=!item.show">
                        <div class="pull-left">
                            {{item.title}}</div>
                        <div class="pull-right clearfix">
                            <div class="pull-left" ng-if="item.show==false"><i class="fa fa-angle-down"></i></div>
                            <div class="pull-left" ng-if="item.show==true"><i class="fa fa-angle-up"></i></div>
                        </div>
                    </div>
                    <div class="com-body">
                        <div class="com-question-set" ng-repeat="section in item.section" ng-init="item.show=false;" ng-show="item.show">
                            <div class="com-question">
                                <div>
                                    <b>{{$parent.$index+1}}.{{$index+1}}. {{section.heading}}</b>
                                    <div ng-repeat="question in section.questions">
                                        <div class="pl-2">
                                            <u>{{$parent.$parent.$index+1}}.{{$parent.$index+1}}.{{$index+1}}</u> {{question.text}} <br>
                                            <div class="row">
                                                <div class="col btn-answer" ng-click="vm.setAnswer(question,1)" ng-class="{'active':question.answer==1}">
                                                    <div class="bg-white text-center">1</div>
                                                </div>
                                                <div class="col btn-answer" ng-click="vm.setAnswer(question,2)" ng-class="{'active':question.answer==2}">
                                                    <div class="bg-white text-center">2</div>
                                                </div>
                                                <div class="col btn-answer" ng-click="vm.setAnswer(question,3)" ng-class="{'active':question.answer==3}">
                                                    <div class="bg-white text-center">3</div>
                                                </div>
                                                <div class="col btn-answer" ng-click="vm.setAnswer(question,4)" ng-class="{'active':question.answer==4}">
                                                    <div class="bg-white text-center">4</div>
                                                </div>
                                                <div class="col btn-answer" ng-click="vm.setAnswer(question,5)" ng-class="{'active':question.answer==5}">
                                                    <div class="bg-white text-center">5</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <button ng-show="!vm.stagesList.stage2.rights.mentee.readOnly" type="submit" class="btn btn-primary" ng-click="vm.saveStage(2);">Submit</button>
                    <button ng-show="vm.stagesList.stage2.rights.mentee.readOnly == 1 && vm.stagesList.stage2.rights.mentor.readOnly == 1" type="submit" class="btn btn-primary" ng-click="vm.nextStage()">Next</button>
                    <div ng-show="vm.stagesList.stage2.rights.mentee.readOnly == 1 && vm.stagesList.stage2.rights.mentor.readOnly == 0" class="text-right text-danger"><b>Under Review</b></div>
                </div>
            </div>

            <div class="stage-holder add-goals" ng-show="vm.stageVisibility.stage3">
                <div class="row" ng-if="vm.stagesList.stage3.mentorFeedback">
                    <div class="col">
                        <div class="form-group">
                            <label class="text-danger" for="vm.stagesList.stage3.mentorFeedback">Mentor Feedback
                        </label>
                            <textarea type="text" class="form-control" ng-model="vm.stagesList.stage3.mentorFeedback" readonly> </textarea>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <button class="btn btn-danger" ng-click="vm.addGoal();" ng-hide="vm.stagesList.stage3.rights.mentee.readOnly">Add</button>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="thead-dark">
                                <tr>
                                    <th>Competency (specific topic area for your learning)</th>
                                    <th>Learning goal</th>
                                    <th>Resources needed to achieve goals</th>
                                    <th>Review date</th>
                                    <th>Due date</th>
                                    <th>Competency</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in vm.stagesList.stage3.items">
                                    <td><select ng-model="item.term" ng-disabled="vm.stagesList.stage3.rights.mentee.readOnly">
                                    <option value="Short term (3 months)">Short term (3 months)</option>
                                    <option value="Intermediate (6 months)">Intermediate (6 months)</option>
                                    <option value="Long term (1 year)">Long term (1 year)</option>
                                    </select></td>
                                    <td><input ng-readonly="vm.stagesList.stage3.rights.mentee.readOnly" type="text" ng-model="item.goal" /></td>
                                    <td><input ng-readonly="vm.stagesList.stage3.rights.mentee.readOnly" type="text" ng-model="item.resource" /></td>
                                    <td><input ng-readonly="vm.stagesList.stage3.rights.mentee.readOnly" type="text" ng-model="item.review_date" /></td>
                                    <td><input ng-readonly="vm.stagesList.stage3.rights.mentee.readOnly" type="text" ng-model="item.due_date" /></td>
                                    <td>
                                        <select ng-model="item.relatedCom" ng-disabled="vm.stagesList.stage3.rights.mentee.readOnly">
                                            <optgroup label="{{item.title}}" ng-repeat="item in vm.stagesList.stage2.items">
                                                <option value="item.title" ng-repeat="section in item.section" ng-if="$first">All</option>
                                                <option value="section.heading" ng-repeat="section in item.section">{{section.heading}}</option>
                                            </optgroup>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <button ng-show="!vm.stagesList.stage3.rights.mentee.readOnly" type="submit" class="btn btn-primary" ng-click="vm.saveStage(3);">Submit</button>
                    <button ng-show="vm.stagesList.stage3.rights.mentee.readOnly == 1 && vm.stagesList.stage3.rights.mentor.readOnly == 1" type="submit" class="btn btn-primary" ng-click="vm.nextStage()">Next</button>
                    <div ng-show="vm.stagesList.stage3.rights.mentee.readOnly == 1 && vm.stagesList.stage3.rights.mentor.readOnly == 0" class="text-right text-danger"><b>Under Review</b></div>
                </div>
            </div>

            <div class="stage-holder sum-evidence" ng-show="vm.stageVisibility.stage4">
                <div class="row" ng-if="vm.stagesList.stage4.mentorFeedback">
                    <div class="col">
                        <div class="form-group">
                            <label class="text-danger" for="vm.stagesList.stage4.mentorFeedback">Mentor Feedback
                        </label>
                            <textarea type="text" class="form-control" ng-model="vm.stagesList.stage4.mentorFeedback" readonly> </textarea>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <button class="btn btn-danger mr-1" ng-click="vm.addSummary();" ng-hide="vm.stagesList.stage4.rights.mentor.readOnly">Add Evidence</button>
                    <button class="btn btn-sm mr-1" ng-click="vm.openAllAccordion('es',true)">Open All</button>
                    <button class="btn btn-sm" ng-click="vm.openAllAccordion('es',false)">Close All</button>
                </div>
                <div class="my-4" ng-repeat="item in vm.stagesList.stage4.items">
                    <div class="com-header clearfix" ng-click="item.show=!item.show">
                        <div class="pull-left">
                            Evidence {{$index+1}}</div>
                        <div class="pull-right clearfix">
                            <div class="pull-left" ng-if="!item.show"><i class="fa fa-angle-down"></i></div>
                            <div class="pull-left" ng-if="item.show==true"><i class="fa fa-angle-up"></i></div>
                        </div>
                    </div>
                    <div ng-show="item.show">
                        <div class="row">
                            <div class="col-4">Evidence title</div>
                            <div class="col-8"><input ng-readonly="vm.stagesList.stage4.rights.mentee.readOnly" type="text" ng-model="item.title" /></div>
                        </div>
                        <div class="row">
                            <div class="col-4">Date completed</div>
                            <div class="col-8"><input ng-readonly="vm.stagesList.stage4.rights.mentee.readOnly" type="text" ng-model="item.date_completed" /></div>
                        </div>
                        <div class="row">
                            <div class="col-4">Evidence category</div>
                            <div class="col-8">
                                <select ng-readonly="vm.stagesList.stage4.rights.mentee.readOnly" ng-disabled="vm.stagesList.stage4.rights.mentee.readOnly" ng-model="item.evidence_category">
                                <option value="Clinical">Clinical</option>
                                <option value="Education">Education</option>
                                <option value="Leadership">Leadership</option>
                                <option value="Policy">Policy</option>
                                <option value="Research">Research</option>
                            </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col"><b>Continuing Professional Development (CPD) points/ hrs</b> associated with this evidence</div>
                        </div>
                        <div class="row">
                            <div class="col-4"><b>Knowledge</b> (Provide a narrative of your evidence and experience gained)</div>
                            <div class="col-8"><input ng-readonly="vm.stagesList.stage4.rights.mentee.readOnly" type="text" ng-model="item.knowledge" /></div>
                        </div>
                        <div class="row">
                            <div class="col-4"><b>Skills</b> (Document the skills you gained through this experience)</div>
                            <div class="col-8"><input ng-readonly="vm.stagesList.stage4.rights.mentee.readOnly" type="text" ng-model="item.skills" /></div>
                        </div>
                        <div class="row">
                            <div class="col-4"><b>Attitudes</b> (Have your attitudes changed as a result of this experience?)</div>
                            <div class="col-8"><input ng-readonly="vm.stagesList.stage4.rights.mentee.readOnly" type="text" ng-model="item.attitude" /></div>
                        </div>
                        <div class="row">
                            <div class="col-4"><b>Competencies and domains of practice</b> (Highlight competencies relevant for this piece of evidence)</div>
                            <div class="col-8">
                                <div ng-repeat="com in item.competency">
                                    <input ng-readonly="vm.stagesList.stage4.rights.mentee.readOnly" ng-disabled="vm.stagesList.stage4.rights.mentee.readOnly" type="checkbox" ng-model="com.checked" /> {{com.text}}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-4">Notify mentor (date)</div>
                            <div class="col-8"><input ng-readonly="vm.stagesList.stage4.rights.mentee.readOnly" type="text" ng-model="item.mentor_notify_date" /></div>
                        </div>
                        <div class="mb-4">
                            <hr>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <button ng-show="!vm.stagesList.stage4.rights.mentee.readOnly" type="submit" class="btn btn-primary" ng-click="vm.saveStage(4);">Submit</button>
                    <button ng-show="vm.stagesList.stage4.rights.mentee.readOnly == 1 && vm.stagesList.stage4.rights.mentor.readOnly == 1" type="submit" class="btn btn-primary" ng-click="vm.nextStage()">Next</button>
                    <div ng-show="vm.stagesList.stage4.rights.mentee.readOnly == 1 && vm.stagesList.stage4.rights.mentor.readOnly == 0" class="text-right text-danger"><b>Under Review</b></div>
                </div>
            </div>

            <div class="stage-holder" ng-show="vm.stageVisibility.stage5">
                <div class="row form-group align-items-center">
                    <div class="col">Mentee Name</div>
                    <div class="col"><input ng-readonly="vm.stagesList.stage5.rights.mentee.readOnly" class="form-control" type="text" ng-model="vm.stagesList.stage5.mentee.mentee_name" disabled/></div>
                </div>
                <div class="row form-group align-items-center">
                    <div class="col">Mentee Role</div>
                    <div class="col"><input ng-readonly="vm.stagesList.stage5.rights.mentee.readOnly" class="form-control" type="text" ng-model="vm.stagesList.stage5.mentee.mentee_role" /></div>
                </div>
                <div class="row form-group align-items-center">
                    <div class="col">Mentor Name</div>
                    <div class="col"><input ng-readonly="vm.stagesList.stage5.rights.mentee.readOnly" class="form-control" type="text" ng-model="vm.stagesList.stage5.mentee.mentor_name" /></div>
                </div>
                <div class="row form-group align-items-center">
                    <div class="col">Mentor Role</div>
                    <div class="col"><input ng-readonly="vm.stagesList.stage5.rights.mentee.readOnly" class="form-control" type="text" ng-model="vm.stagesList.stage5.mentee.mentor_role" /></div>
                </div>
                <div class="row form-group align-items-center">
                    <div class="col">Additional Comments</div>
                    <div class="col"><textarea ng-readonly="vm.stagesList.stage5.rights.mentee.readOnly" class="form-control" type="text" ng-model="vm.stagesList.stage5.mentee.comments"></textarea></div>
                </div>
                <div class="row form-group align-items-center" ng-repeat="item in vm.stagesList.stage5.mentee.questions">
                    <div class="col">{{item.text}}</div>
                    <div class="col">
                        <select class="form-control" ng-readonly="vm.stagesList.stage5.rights.mentee.readOnly" ng-disabled="vm.stagesList.stage5.rights.mentee.readOnly" ng-model="item.answer">
                            <option value="" readonly disabled selected>-- select --</option>
                            <option value="Strongly Disagree">Strongly Disagree</option>
                            <option value="Disagree">Disagree</option>
                            <option value="Neutral">Neutral</option>
                            <option value="Agree">Agree</option>
                            <option value="Strongly Agree">Strongly Agree</option>
                        </select>
                    </div>
                </div>
                <div class="text-right">
                    <button ng-show="!vm.stagesList.stage5.rights.mentee.readOnly" type="submit" class="btn btn-primary" ng-click="vm.saveStage(5);">Submit</button>
                    <button ng-show="vm.stagesList.stage5.rights.mentee.readOnly == 1 && vm.stagesList.stage5.rights.mentor.readOnly == 1" type="submit" class="btn btn-primary">Done All</button>
                </div>
            </div>
        </form>

    </div>

</div>